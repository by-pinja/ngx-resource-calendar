!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("@protacon/ngx-resource-calendar",["exports","@angular/core","@angular/common"],t):t(((e=e||self).protacon=e.protacon||{},e.protacon["ngx-resource-calendar"]={}),e.ng.core,e.ng.common)}(this,(function(e,t,n){"use strict";var o=function(){function e(){this.dates=[],this.events=[],this.slotDurationInMinutes=15,this.height=60,this.hourBorderHeight=1,this.hours=[],this.datesWithEvents=[]}return e.prototype.ngOnChanges=function(e){if(e.dates&&e.dates.currentValue){var t=e.dates.currentValue;0===t.length?this.hours=[]:this.hours=t[0].resources[0].hours,this.setResourceEvents()}else e.events&&e.events.currentValue&&this.setResourceEvents()},e.prototype.setResourceEvents=function(){var e=this;this.dates&&this.dates.length>0&&(this.datesWithEvents=[],this.dates.forEach((function(t){var n=[];t.resources.forEach((function(t){n.push({data:t,hours:t.hours,events:e.getEvents(t.resourceNumber,t.hours[0].slots[0].time)})})),e.datesWithEvents.push({data:t,resources:n})})))},e.prototype.getEvents=function(e,t){var n=this;if(!this.events||0===this.events.length)return[];var o=new Date(t);o.setDate(o.getDate()+1);var r=t.getTime(),a=o.getTime();return this.events.filter((function(t){return t.resourceNumber===e&&t.startTime.getTime()>=r&&t.endTime.getTime()<a})).map((function(e){return{data:e,position:n.calculatePosition(e,t),height:n.calculateHeight(e)}}))},e.prototype.calculatePosition=function(e,t){var n=(e.startTime.getTime()-t.getTime())/1e3/60;return Math.floor(n/this.slotDurationInMinutes)*this.height+Math.floor(n/60)*this.hourBorderHeight},e.prototype.calculateHeight=function(e){var t=(e.endTime.getTime()-e.startTime.getTime())/1e3/60;if(t<=0)return 1*this.height;var n=e.endTime.getHours()-e.startTime.getHours();return 0===e.endTime.getMinutes()&&n>0&&n--,t/this.slotDurationInMinutes*this.height+n*this.hourBorderHeight},e.decorators=[{type:t.Component,args:[{selector:"pro-resource-calendar",template:'\n<div class="header">\n  <div class="hour-row info-block">\n    <ng-template\n      [ngTemplateOutlet]="infoTemplate || defaultInfoTemplate"\n    ></ng-template>\n  </div>\n  <div class="day-row" *ngFor="let date of datesWithEvents">\n    <ng-template\n      [ngTemplateOutlet]="dayTemplate || defaultDayTemplate"\n      [ngTemplateOutletContext]="{ day: date.data }"\n    ></ng-template>\n    <div class="resources">\n      <div\n        class="resource"\n        [style.max-width.%]="100 / date.resources.length"\n        *ngFor="let resource of date.resources"\n      >\n        <ng-template\n          [ngTemplateOutlet]="resourceTemplate || defaultResourceTemplate"\n          [ngTemplateOutletContext]="{ resource: resource.data }"\n        ></ng-template>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="calendar">\n  <div class="hour-row">\n    <div *ngFor="let hour of hours">\n      <div class="hour-slot">\n        <div\n          class="hour-sub-slot"\n          [style.height.px]="height"\n          *ngFor="let slot of hour.slots"\n        >\n          <ng-template\n            [ngTemplateOutlet]="hourTemplate || defaultHourTemplate"\n            [ngTemplateOutletContext]="{ slot: slot }"\n          ></ng-template>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div *ngFor="let date of datesWithEvents" class="day-row resources">\n    <ng-template\n      [ngTemplateOutlet]="currentTimeTemplate || defaultCurrentTimeTemplate"\n      [ngTemplateOutletContext]="{ day: date.data }"\n    ></ng-template>\n    <div\n      class="resource"\n      [style.max-width.%]="100 / date.resources.length"\n      *ngFor="let resource of date.resources"\n    >\n      <div\n        *ngFor="let event of resource.events"\n        [style.top.px]="event.position"\n        [style.height.px]="event.height"\n        class="event"\n      >\n        <ng-template\n          [ngTemplateOutlet]="eventTemplate || defaultEventTemplate"\n          [ngTemplateOutletContext]="{ event: event.data, resource: resource.data, day: date.data }"\n        ></ng-template>\n      </div>\n\n      <div class="hour-slot" *ngFor="let hour of resource.hours">\n        <div\n          class="hour-sub-slot"\n          [style.height.px]="height"\n          *ngFor="let slot of hour.slots"\n        >\n          <ng-template\n            [ngTemplateOutlet]="slotTemplate || defaultSlotTemplate"\n            [ngTemplateOutletContext]="{\n              slot: slot,\n              resource: resource.data,\n              day: date.data\n            }"\n          ></ng-template>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<ng-template #defaultInfoTemplate></ng-template>\n<ng-template #defaultDayTemplate let-day="day">{{ day.day | date: \'shortDate\' }}</ng-template>\n<ng-template #defaultResourceTemplate let-resource="resource">{{\n  resource.resourceNumber\n}}</ng-template>\n<ng-template #defaultHourTemplate let-slot="slot">{{ slot.time | date: \'shortTime\' }}</ng-template>\n<ng-template #defaultCurrentTimeTemplate let-day="day"></ng-template>\n<ng-template #defaultEventTemplate let-event="event">{{\n  event.resourceNumber\n}}</ng-template>\n<ng-template #defaultSlotTemplate let-slot="slot">{{ slot.time | date: \'shortTime\' }}</ng-template>\n  ',changeDetection:t.ChangeDetectionStrategy.OnPush,styles:["\n.header {\n  flex-direction: row;\n  box-sizing: border-box;\n  display: flex;\n  place-content: stretch flex-start;\n  align-items: stretch;\n}\n\n.calendar {\n  flex-direction: row;\n  box-sizing: border-box;\n  display: flex;\n  place-content: stretch flex-start;\n  align-items: stretch;\n}\n\n.resources {\n  flex-direction: row;\n  box-sizing: border-box;\n  display: flex;\n  place-content: stretch flex-start;\n  align-items: stretch;\n}\n\n.resource {\n  flex: 1 1 100%;\n  position: relative;\n  box-sizing: border-box;\n}\n\n.hour-sub-slot {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.hour-row {\n  width: 10%;\n  min-width: 50px;\n}\n\n.day-row {\n  position: relative;\n  width: 90%;\n}\n\n.event {\n  position: absolute;\n  z-index: 1;\n  width: 100%;\n  overflow: hidden;\n}\n  "]}]}],e.propDecorators={dates:[{type:t.Input}],events:[{type:t.Input}],slotDurationInMinutes:[{type:t.Input}],height:[{type:t.Input}],hourBorderHeight:[{type:t.Input}],infoTemplate:[{type:t.Input}],dayTemplate:[{type:t.Input}],resourceTemplate:[{type:t.Input}],hourTemplate:[{type:t.Input}],eventTemplate:[{type:t.Input}],slotTemplate:[{type:t.Input}],currentTimeTemplate:[{type:t.Input}]},e}();var r=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[o],imports:[n.CommonModule],exports:[o]}]}],e}(),a=function(){};var s=function(){};var l=function(){};var i=function(){};var u=function(){};e.DayModel=a,e.EventModel=s,e.HourModel=l,e.NgxResourceCalendarModule=r,e.ResourceCalendarComponent=o,e.ResourceModel=i,e.SlotModel=u,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=protacon-ngx-resource-calendar.umd.min.js.map